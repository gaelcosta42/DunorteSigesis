<?php  /**   * Imprimir relatório   *   */      //TOTAL DO CABECALHO DEVE SER = 277 PARA PAGINA Landscape   //TOTAL DO CABECALHO DEVE SER = 190 PARA PAGINA Portrait		require_once("impressao_header.php");	require_once("init.php");		if (!$usuario->is_Todos())	  redirect_to("login.php");	  	$id_cliente = get('id_cliente'); 	$dataini = get('dataini'); 	$datafim = get('datafim'); 		$titulo = utf8_decode(lang('PRODUTOS_VENDIDOS'));		$inicio = 35;		$row_empresa = Core::getRowById("empresa", 1);  	$pdf = new PDF_Impressao( 'P', 'mm', 'A4' );	$pdf->AddPage();	$pdf->setRodape();	$pdf->tamanho(-2);	$pdf->addEmpresa($row_empresa->nome, $row_empresa->cnpj,$row_empresa->endereco.", ".$row_empresa->numero,$row_empresa->bairro.", ".$row_empresa->cidade);		//$pdf->rascunho( "RASCUNHO" );
	$tabela_inicio = $inicio;	$linha_inicio = $tabela_inicio + 10;	$cabecalho=array( 				 utf8_decode(lang('PRODUTO'))    => 70,				 utf8_decode(lang('CODIGO'))  => 20,				 utf8_decode(lang('VALOR'))  => 35,				 utf8_decode(lang('QUANT'))  => 25,				 utf8_decode(lang('VALOR_TOTAL'))  => 40);				 	$pdf->definirCols($cabecalho, "C", true, 1);		$cols=array( utf8_decode(lang('PRODUTO'))    => "L",				 utf8_decode(lang('CODIGO'))  => "L",				 utf8_decode(lang('VALOR'))  => "C",				 utf8_decode(lang('QUANT'))  => "C",				 utf8_decode(lang('VALOR_TOTAL'))  => "C");				 	$pdf->addLineFormat($cols);	$y    = $linha_inicio;		$retorno_row = $cadastro->getCadastroProdutosGestao($id_cliente, $dataini, $datafim);	$total = 0;	if($retorno_row) {		foreach ($retorno_row as $exrow) {			$total += $exrow->valor_total;					$linha=array( 				utf8_decode(lang('PRODUTO'))    => utf8_decode($exrow->produto),				utf8_decode(lang('CODIGO'))  => utf8_decode($exrow->codigo),				utf8_decode(lang('VALOR'))  => utf8_decode(moeda($exrow->valor)),				utf8_decode(lang('QUANT'))  => utf8_decode(decimal($exrow->quant)),				utf8_decode(lang('VALOR_TOTAL'))  => utf8_decode(moeda($exrow->valor_total)) );			 			$size = $pdf->addLine( $y, $linha, false, 1 );			$y   += $size + 2;			if($y > 260) {						$tabela_final = $y - 30;				$tabela_inicio = $inicio;				$linha_inicio = $tabela_inicio + 10;				$y    = $linha_inicio;				$pdf->addCols( $tabela_inicio , $tabela_final , $cabecalho);				$pdf->AddPage();				$pdf->addEmpresa($row_empresa->nome, $row_empresa->cnpj,$row_empresa->endereco.", ".$row_empresa->numero,$row_empresa->bairro.", ".$row_empresa->cidade);			}		}		unset($exrow);		$linha=array( 			utf8_decode(lang('PRODUTO'))    => '',			utf8_decode(lang('CODIGO'))  => '',			utf8_decode(lang('VALOR'))  => '',			utf8_decode(lang('QUANT'))  => utf8_decode(lang('TOTAL')),			utf8_decode(lang('VALOR_TOTAL'))  => utf8_decode(moeda($total)) );		 		$size = $pdf->addLine( $y, $linha, true, 1 );		$tabela_final = $y-32;		$pdf->addCols( $tabela_inicio , $tabela_final , $cabecalho);	}	$pdf->Output();?>